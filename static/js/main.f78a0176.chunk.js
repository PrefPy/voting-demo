(this["webpackJsonpvoting-rules-demo"]=this["webpackJsonpvoting-rules-demo"]||[]).push([[0],{155:function(e,t,n){},178:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(23),s=n.n(r),o=n(5),l=(n(155),n(6));function c(){return Object(l.jsxs)("div",{className:"Footer",children:[Object(l.jsxs)("div",{children:["Built by: Prof. ",Object(l.jsx)("a",{target:"_blank",href:"http://cs.rpi.edu/~xial",rel:"noopener noreferrer",children:"Lirong Xia"}),"'s Group"]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("a",{target:"_blank",href:"https://icons8.com/icon/KwJ_oShFEoN7/elections",rel:"noopener noreferrer",children:"Elections"})," icon by ",Object(l.jsx)("a",{target:"_blank",href:"https://icons8.com",rel:"noopener noreferrer",children:"Icons8"})]})]})}var u=n(1),d=n(87),p=n.n(d),j=n(65),b=n(286),h=n(3),m=(n(178),n(281)),f=n(287),O=n(282),g=n(278),x=n(279),v=n(57),y=n(283),w=n(284),k=function(e){var t=Object(i.useState)(e.value),n=Object(o.a)(t,2),a=n[0],r=n[1],s=function(t){e.onChange(t),r(t)};return Object(l.jsxs)(g.a,{children:[Object(l.jsx)(x.a,{span:12,children:Object(l.jsx)(y.a,{name:e.name,min:e.min,max:e.max,step:e.step,value:a,onChange:s})}),Object(l.jsx)(x.a,{span:5,children:Object(l.jsx)(w.a,{name:e.name,min:e.min,max:e.max,step:e.step,value:a,onChange:s})})]})},C=[{type:"Simulation input",inputs:[{field:"no_candidates",label:"Number of Candidates",info:"Different number of candidates will lead to design of different voting rules",required:!0,detail:{type:"slider",min:2,max:4,step:1}},{field:"group_ratio",label:"Group Ratio",info:"Group fairness is computed in terms of group sizes, please enter ratio between the sizes of two groups as (smaller group size)/(larger group size)",required:!0,detail:{type:"slider",min:.01,max:1,step:.01}}]},{type:"Desired axioms",inputs:[{field:"gr_fair_req",label:"Group Fairness Requirement",info:"Real number between 0~1. Average group-imbalance based fairness value. Calculated using average rank utility of both groups. Higher value means more fairness.",required:!1,detail:{type:"slider",min:.01,max:1,step:.01}},{field:"conc_eff_req",label:"Condorcet Efficiency Requirement",info:"Real number between 0~1. Fraction of preference profiles where Condorcet winner is chosen if it exists. Higher value means more probability of choosing the Condorcet winner.",required:!1,detail:{type:"slider",min:.01,max:1,step:.01}},{field:"consistency",label:"Consistency Requirement",info:"Real number between 0~1. Higher value means higher probability that the voting rule will satisfy the consistency property",required:!1,detail:{type:"slider",min:.01,max:1,step:.01}},{field:"neutrality",label:"Neutrality Requirement",info:"Real number between 0~1. Higher value means higher probability that the voting rule will satisfy the neutrality property.",required:!1,detail:{type:"slider",min:.01,max:1,step:.01}},{field:"monotonicity",label:"Monotonicity Requirement",info:"Real number between 0~1. Higher value means higher probability that the voting rule will satisfy the monotonicity property",required:!1,detail:{type:"slider",min:.01,max:1,step:.01}}]}],I=(m.a.Text,m.a.Title),N=function(e){var t=function(t,n){void 0!==t.target&&(t=t.target.value),e.setSimuInput(Object(u.a)(Object(u.a)({},e.simuInput),{},Object(h.a)({},n,t))),console.log(e.simuInput)},n=function(e){switch(e.detail.type){case"slider":return Object(l.jsx)(k,{name:e.field,min:e.detail.min,max:e.detail.max,step:e.detail.step,onChange:function(n){return t(n,e.field)}});case"radio":return Object(l.jsx)(f.a.Group,{name:e.field,onChange:function(n){return t(n,e.field)},children:e.detail.vals.map((function(e){return Object(l.jsx)(f.a.Button,{value:e,children:e},e)}))});default:return null}};return Object(l.jsxs)("div",{className:"StartForm",children:[Object(l.jsx)(I,{level:3,children:"Designing Voting Rules"}),Object(l.jsxs)("div",{className:"instruction",children:["Choose required property for new voting rules (",Object(l.jsx)("star",{children:"*"})," marked fields are required)"]}),Object(l.jsxs)(O.a,{layout:"horizontal",initialValues:e.simuInput,labelCol:{span:12},wrapperCol:{span:20},style:{width:"90%"},labelAlign:"left",onFinish:e.onSubmit,children:[C.map((function(e){return Object(l.jsxs)("div",{className:"inputgroup",children:[Object(l.jsx)("div",{className:"title",children:e.type}),e.inputs.map((function(e){return Object(l.jsx)(O.a.Item,{label:e.label,name:e.field,rules:e.required?[{required:!0,message:"Please input a value!"}]:[],tooltip:e.info,children:n(e)},e.field)}))]})})),Object(l.jsxs)(g.a,{type:"flex",justify:"center",align:"middle",style:{marginBottom:10},children:[Object(l.jsx)(x.a,{span:10,children:Object(l.jsx)(v.a,{type:"primary",htmlType:"submit",onClick:function(){e.setSimuInput(Object(u.a)(Object(u.a)({},e.simuInput),{},{"output-type":"traditional"}))},children:"Check Traditional Output"})}),Object(l.jsx)(x.a,{span:10,children:Object(l.jsx)(v.a,{type:"primary",htmlType:"submit",onClick:function(){e.setSimuInput(Object(u.a)(Object(u.a)({},e.simuInput),{},{"output-type":"learned"}))},children:"Generate Voting Rule"})})]})]})]})},S=(n(249),function(){var e=Object(i.useState)({expandAbstract:!1,expandIntro:!0}),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{className:"TutorialSection",children:[Object(l.jsxs)("div",{className:"intro-body ".concat(n.expandIntro?"expanded":"collapsed"),children:[Object(l.jsxs)("h1",{style:{textAlign:"center"},children:[Object(l.jsx)("b",{children:"MLVR"})," - Machine Learning based design of Voting Rules"]}),Object(l.jsxs)("div",{className:"main-content",children:[Object(l.jsx)("h3",{children:Object(l.jsx)("b",{children:"Introduction"})}),"This demo demonstrates our framework to find voting rules that match the given constraints using machine learning. We showcase a number of axioms that are both traditional and new that our framework can satisfy, such as traditional condorcet efficiency, consistency requirement, and some new axioms such as group fairness."]}),Object(l.jsx)(v.a,{onClick:function(){a(Object(u.a)(Object(u.a)({},n),{},{expandIntro:!n.expandIntro}))},type:"link",children:n.expandIntro?"Minimize introduction":"Expand introduction"})]}),Object(l.jsxs)("div",{className:"intro-detail ".concat(n.expandAbstract?"expanded":"collapsed"),children:[Object(l.jsx)(v.a,{onClick:function(){a(Object(u.a)(Object(u.a)({},n),{},{expandAbstract:!n.expandAbstract}))},type:"link",children:n.expandAbstract?"Minimize abstract":"Expand full abstract"}),Object(l.jsxs)("div",{className:"abstract-body",children:["We define a novel notion of group imbalance-based fairness in voting, and see that traditional voting rules are efficient yet unfair in average [1]. Furthermore, fully fair rules would be highly inefficient. Our goal is to be able to design new voting rules with varying levels of fairness and efficiency. We are considering group-imbalance based fairness for two groups and Condorcet efficiency as an efficiency measure. Additionally, we can choose the level of privacy (in terms of local differential privacy) that is required. Once we define the number of candidates, the ratio between group sizes and fairness, efficiency and privacy requirements, a data driven framework will design new voting rules to satisfy the requirements. It will also show a comparison with popular existing voting rules.",Object(l.jsxs)("div",{className:"references",children:[Object(l.jsx)("b",{children:"References:"}),"[1] Mohsin, F., Liu, A., Chen, P.Y., Rossi, F., and Xia, L. ",Object(l.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://drive.google.com/file/d/12bb5i_T9TtOEgyOvQlSk5KmWu2JNdRAi/view?usp=sharing",children:'"Learning to Design Fair and Private Voting Rules."'}),", To be presented at the AI For Social Good Workshop (AI4SG), 30th International Joint Conference on Artificial Intelligence (IJCAI-21). 2021."]})]})]})]})}),_=n(280),T=n(285),R=n(288),q=n(289),A=(n(250),_.a.Dragger),F=(T.a.Option,{type:"primary",style:{width:"100%"}}),P=m.a.Text,G=["Borda","STV","Copeland","Maximin"],D=function(e){var t=Object(i.useState)({showmodal:!1,userinput:!1,showinstruction:!1}),n=Object(o.a)(t,2),a=n[0],r=n[1],s=function(e){r(Object(u.a)(Object(u.a)({},a),{},{userinput:Object(u.a)(Object(u.a)({},a.userinput),e)}))},c={name:"file",multiple:!1,action:"",accept:".txt, .csv",beforeUpload:function(e){var t=new FileReader;return t.onload=function(t){var n=e.name.split(".")[1];s({preference_profile:{type:n,raw_data:t.target.result}})},t.readAsText(e),!1}},d=function(){s({showinstruction:!a.showinstruction})},h={title:"Input format instrtuction",footer:null,onCancel:d,visible:a.showinstruction};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(P,{style:{marginBottom:10},children:"Click this button to view the results of the displayed voting rules with your own data!"}),Object(l.jsx)(v.a,{onClick:function(){r(Object(u.a)(Object(u.a)({},a),{},{showmodal:!0}))},children:"Apply Voting Rule"})]}),Object(l.jsxs)(b.a,{visible:a.showmodal,onCancel:function(){r(Object(u.a)(Object(u.a)({},a),{},{showmodal:!1}))},footer:null,children:[Object(l.jsxs)("div",{className:"upload-zone",children:[Object(l.jsx)("h2",{children:"Import a preference profile"}),Object(l.jsxs)("div",{className:"example",children:["An example file is available ",Object(l.jsx)("a",{type:"download",href:"https://gist.githubusercontent.com/inwonakng/9a214e9380aa95d816da3526592c2023/raw/",target:"_blank",rel:"noopener noreferrer",children:"here"}),Object(l.jsx)("br",{}),"For a description of the file format, click ",Object(l.jsx)("a",{onClick:d,children:" here"}),Object(l.jsx)(b.a,Object(u.a)(Object(u.a)({},h),{},{children:Object(l.jsx)("div",{style:{whiteSpace:"pre-line"},children:"line 1: number of candidates, m\nline 2: number of agents in group 1, n1\nline 3: ranking of agent 1 in group 1 (ranking is a permutation of [0,...,m-1]. e.g. for m=4, '''0 3 2 1''' is a ranking meaning 0>3>2>1\n...\nline n1+2: ranking of agent n1 in group 1\nline n1+3: number of agents in group 2, n2\nline n1+4: ranking of agent 1 in group 2\n...\nline n1+n2+3: ranking of agent n2 in group 2"})}))]}),Object(l.jsxs)(A,Object(u.a)(Object(u.a)({},c),{},{children:[Object(l.jsx)("p",{className:"ant-upload-drag-icon",children:Object(l.jsx)(q.a,{})}),Object(l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(l.jsx)("p",{className:"ant-upload-hint",children:"Only supports csv or txt files"})]}))]}),Object(l.jsxs)("div",{className:"apply-zone",children:[Object(l.jsx)("h2",{children:"Choose a voting rule to apply"}),Object(l.jsx)("div",{className:"preset-rules",children:Object(l.jsx)(R.a.Group,{onChange:function(e){s({chosen_trad_rules:e})},style:{width:"100%"},children:G.map((function(e){return Object(l.jsx)(x.a,{children:Object(l.jsx)(R.a,{className:"checkboxButton",value:e,children:e},e)})}))})}),Object(l.jsx)(v.a,Object(u.a)(Object(u.a)({className:"apply-button"},F),{},{onClick:function(){return void 0===a.userinput.chosen_learned_rules?(alert("Please choose a learned rule to apply!"),!1):void 0===a.userinput.preference_profile?(alert("Please upload a preference profile!"),!1):void Object(j.trackPromise)(p.a.post("".concat(e.settings.server,"/apply_rule"),a.userinput).then((function(t){console.log("passing this"),console.log(t),e.setPopupState({showPopup:!0,resultData:t.data})})))},children:"Apply Voting Rules"}))]})]})]})},V=(n(251),n(135),m.a.Text),E=(m.a.Title,function(e){return console.log(e.resultData),Object(l.jsxs)("div",{className:"voting-result",children:[Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsx)("tr",{className:"theader",children:e.resultData.tabledata.columns.map((function(e){return Object(l.jsx)("th",{children:e},e)}))}),e.resultData.tabledata.rows.map((function(e){return Object(l.jsx)("tr",{children:e.map((function(t){return Object(l.jsx)("td",{children:t},e[0]+t)}))},e[0])}))]})}),Object(l.jsxs)("div",{className:"remark",children:[Object(l.jsx)(V,{strong:!0,children:"Remark: "}),Object(l.jsx)("div",{children:e.resultData.tabledata.remark.split("\n").map((function(e){return Object(l.jsx)("p",{children:e})}))})]})]})}),z=(n(252),m.a.Title),M=m.a.Text,B=function(e){var t=e.output.map((function(e,t){return{label:e.privacy,value:t}})),n=Object(i.useState)({privacy:0}),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(l.jsxs)("div",{className:"SimuOutput",children:[Object(l.jsx)(z,{level:3,children:"Generation output"}),Object(l.jsx)(z,{level:5,children:e.output?e.output.length>1?"Values for different privacy values":"Values for traditional voting rules":""}),e.output&&1===e.output.length?Object(l.jsx)(M,{children:"Adding more input will update the table with more results!"}):"",Object(l.jsxs)("div",{className:"maincontent",children:[Object(l.jsx)("div",{className:"choose-table",children:t.length>1?Object(l.jsx)(f.a.Group,{options:t,onChange:function(e){s(Object(u.a)(Object(u.a)({},r),{},{privacy:e.target.value}))},value:r.privacy,optionType:"button",buttonStyle:"solid"}):""}),e.output.length>0?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(E,{resultData:e.output[r.privacy]}),t.length>1?Object(l.jsx)(D,{leanred_models:e.learned_models,simuInput:e.simuInput,style:{marginTop:20}}):""]}):Object(l.jsx)("div",{className:"startmessage",children:"No input loaded yet.\n                        Press the Generate Voting Rule button to reload the sample output!"})]})]})},J=(n(253),m.a.Text),L=function(e){var t=Object(i.useState)({modalvisible:!0,settings:e.settings}),n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(l.jsx)(b.a,{title:"Admin Settings",visible:a.modalvisible,onCancel:function(){e.setSettings(a.settings),r(Object(u.a)(Object(u.a)({},a),{},{modalvisible:!1}))},footer:null,children:Object(l.jsxs)(g.a,{style:{alignItems:"center"},children:[Object(l.jsx)(x.a,{span:8,children:Object(l.jsx)(J,{strong:!0,children:"Choose a server"})}),Object(l.jsx)(x.a,{span:8,children:Object(l.jsx)(f.a.Group,{options:[{label:"local",value:"http://localhost:8000/voting"},{label:"opra",value:"https://opra.cs.rpi.edu/polls/voting"}],onChange:function(e){return function(e,t){r(Object(u.a)(Object(u.a)({},a),{},{settings:Object(u.a)(Object(u.a)({},a.settings),{},Object(h.a)({},e,t.target.value))}))}("server",e)},value:a.settings.server,optionType:"button",buttonStyle:"solid"})})]})})},H=(n(254),function(e){var t=Object(i.useState)({showError:!1,result:[],learned_models:[],outputType:"traditional"}),n=Object(o.a)(t,2),a=n[0],r=n[1],s={title:"Message",footer:null,onCancel:function(){r(Object(u.a)(Object(u.a)({},a),{},{showError:!1}))},visible:a.showError};return Object(l.jsxs)("div",{className:"StartPage",children:[Object(l.jsx)(L,{settings:e.settings,setSettings:e.setSettings}),Object(l.jsx)(S,{}),Object(l.jsxs)("div",{className:"simulation-area",children:[Object(l.jsx)(N,{onSubmit:function(){console.log("sending ".concat(JSON.stringify(a.simuInput))),console.log("".concat(e.settings.server,"/run_sim")),Object(j.trackPromise)(p.a.post("".concat(e.settings.server,"/run_sim"),a.simuInput).then((function(e){console.log("got this in  return"),console.log(e.data.display),void 0!==e.data.display?r(Object(u.a)(Object(u.a)({},a),{},{result:e.data.display})):(console.log(e.data),r(Object(u.a)(Object(u.a)({},a),{},{showError:!0})))})))},simuInput:a.simuInput,setSimuInput:function(e){r(Object(u.a)(Object(u.a)({},a),{},{simuInput:e}))},setOutputType:function(e){r(Object(u.a)(Object(u.a)({},a),{},{outputType:e}))}}),Object(l.jsx)(B,{simuInput:a.simuInput,output:a.result,learned_models:a.learned_models})]}),Object(l.jsx)(b.a,Object(u.a)(Object(u.a)({},s),{},{children:"Something bad happened! Check server logs"}))]})}),W=function(){var e=Object(i.useState)({server:"https://opra.cs.rpi.edu/polls/voting"}),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)(H,{settings:n,setSettings:a}),Object(l.jsx)(c,{})]})},K=n(142),X=n.n(K),Q=(n(275),function(e){return Object(j.usePromiseTracker)().promiseInProgress&&Object(l.jsx)("div",{className:"LoadSpinner",children:Object(l.jsx)(X.a,{type:"ThreeDots",color:"#9ef3ec",height:"100",width:"200"})})});s.a.render(Object(l.jsxs)(a.a.StrictMode,{children:[Object(l.jsx)(W,{}),Object(l.jsx)(Q,{})]}),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.f78a0176.chunk.js.map